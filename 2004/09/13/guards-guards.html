<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="/js/jquery.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/theme.js"></script>
<link href="/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/css/theme.css" rel="stylesheet" type="text/css">
<link href="/css/syntax.css" rel="stylesheet" type="text/css">



    <title>Third Bit: Guards! Guards!</title>
  </head>
  <body>
    <div class="container-fluid">
  <div class="row-fluid">
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">Third Bit</a>
      </div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
          <li class="active visible-xs-block"><a href="/links/">Links</a></li>
          <li class="active"><a href="/about/">About</a></li>
          <li class="active"><a href="/talks/">Talks</a></li>
          <li class="active"><a href="/ideas/">Ideas</a></li>
          <li class="active"><a href="/reading/">Reading</a></li>
          <li class="active"><a href="/archive/">Archive</a></li>
          <li class="active"><a href="/teaching/"><em>How to Teach</em></a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li class="active"><a href="http://appear.in/gvwilson"><img src="/files/appear.in.svg" class="navbar-icon" /></a></li>
          <li class="active"><a href="https://github.com/gvwilson"><img src="/files/github.svg" class="navbar-icon" /></a></li>
          <li class="active"><a href="http://twitter.com/gvwilson"><img src="/files/twitter.svg" class="navbar-icon" /></a></li>
          <li class="active"><a href="/feed.xml"><img src="/files/rss.svg" class="navbar-icon" /></a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

    <div class="container container-left">
      <div class="row">
        <div class="col-md-3 hidden-xs">
          <div class="sidebar well">
  <h2>Links</h2>
<p><em><a href="http://software-carpentry.org">Software Carpentry</a></em></p>
<p><em><a href="http://aosabook.org">Architecture of Open Source Applications</a></em></p>
<p><em><a href="http://neverworkintheory.org">Never Work in Theory</a></em></p>
<p><em><a href="http://sensibleadventures.com">Sensible Adventures</a></em></p>
<p><a href="/cv/">CV</a></p>
<p><a href="/bib/">Bibliography</a></p>

  <h2>Favorites</h2>
  
  
  <p><a href="/2018/03/20/goodbye-jeff.html">Goodbye, Jeff</a></p>
  
  <p><a href="/2018/03/16/seven-ways.html">Seven Ways to Think Like a Programmer</a></p>
  
  <p><a href="/2018/03/13/base-case-for-empirical-software-engineering.html">A Base Case for Empirical Software Engineering Research</a></p>
  
  <p><a href="/2018/01/07/book-club.html">Book Club</a></p>
  
  <p><a href="/2017/12/21/talking-people-into-things.html">Ten Simple Rules for Talking People Into Things</a></p>
  
  <p><a href="/2017/11/05/for-everyone.html">Carpentry For Everyone</a></p>
  
  <p><a href="/2017/10/16/exercise-types.html">What Kinds of Exercises Do You Use to Teach Programming?</a></p>
  
  <p><a href="/2017/09/30/git-graphs-and-engineering.html">Git, Graphs, and Software Engineering</a></p>
  
  <p><a href="/2017/06/19/ten-rules-research-partner.html">Ten Simple Rules for Being a Good Research Partner</a></p>
  
  <p><a href="/2017/05/22/numerical-javascript.html">Numerical JavaScript</a></p>
  
  <p><a href="/2017/01/06/them-thats-got.html">Them That's Got</a></p>
  
  <p><a href="/2016/10/30/rules-for-teaching.html">Rules for Teaching</a></p>
  
  <p><a href="/2016/04/29/why-teachers-dont-collaborate.html">Why Teachers Don't Collaborate on Lesson Development</a></p>
  
  <p><a href="/2016/04/01/zen-and-the-art-of-assignment-operators.html">Zen and the Art of Assignment Operators</a></p>
  
  <p><a href="/2016/03/13/in-my-better-world.html">In My Better World</a></p>
  
  <p><a href="/2015/12/19/why-i-teach.html">Why I Teach (Revisited)</a></p>
  
  <p><a href="/2015/12/06/just-keep-swimming.html">Just Keep Swimming</a></p>
  
  <p><a href="/2015/11/29/exaptation.html">Exaptation and the Future of Software Engineering</a></p>
  
  <p><a href="/2015/11/09/daddy-why-dont-you-ever-laugh.html">Daddy, Why Don't You Ever Laugh?</a></p>
  
  <p><a href="/2015/09/22/dad.html">Goodbye, Dad</a></p>
  
  <p><a href="/2014/10/08/announcing-the-creation-of-the-software-carpentry-foundational.html">Announcing the Creation of the Software Carpentry Foundation</a></p>
  
  <p><a href="/2014/03/14/learning-at-scale.html">Is Learning at Scale Just Another Name for Ubiquitous Surveillance in the Classroom?</a></p>
  
  <p><a href="/2013/10/17/you-keep-using-that-word.html">You Keep Using That Word</a></p>
  
  <p><a href="/2013/02/11/correctness-isnt-compelling.html">Correctness Isn't Compelling</a></p>
  
  <p><a href="/2012/10/23/twenty-percent.html">Twenty Percent</a></p>
  
  <p><a href="/2012/06/29/those-who-ignore-history.html">That Seems Simple to Me</a></p>
  
  <p><a href="/2012/01/21/the-life-i-did-live-the-breath-i-breathed.html">We Have Nothing To Give Them</a></p>
  
</div>

        </div>
        <div class="col-md-9">
          <div class="article">
            <div class="well">
              <h1><a href="/2004/09/13/guards-guards.html">Sep 13, 2004 - Guards! Guards!</a></h1>
              <div class="post-content">
                <p>I'm a big fan of <a href="http://www.terrypratchetbooks.com">Terry Pratchet</a>.  How can you <em>not</em> be a fan of someone who dedicates a book to "the Palace Guard, the City Guard, or the Patrol... Whatever the name, their purpose...is identical: to rush into the room, attack the hero one at a time, and be slaughtered..."</p>

<p><a href="http://www.eclipse.org">Eclipse</a> and <a href="http://subversion.tigris.org">Subversion</a> made me feel like one of those poor guys today.  Here's what happened:</p>

<p>1. I checked out a copy of <a href="http://pyre.third-bit.com/hippo">Hippo</a> onto my laptop, and created a directory in which to do the training exercise we've assigned to the incoming students.</p>

<p>2. I fired up <a href="http://www.eclipse.org">Eclipse</a> to create a Java project in that directory.  I put my Java source files in a sub-directory called <code>src</code>, the JAR files my project needed in a sub-directory called <code>lib</code>, and created an empty directory called <code>bin</code> for <a href="http://www.eclipse.org">Eclipse</a> to put compiled class files in.  I used <code>svn&nbsp;add</code> to add all three directories to the repository.</p>

<p>3. Reading the <a href="http://www.hibernate.org">Hibernate</a> documentation, I thought I had to put the mapping file that described how to store my Java objects in a database in the same directory as the compiled class files.  All right, no problem---I created <code>bin/LoanRecord.hbm.xml</code>, and used <code>svn&nbsp;add</code> to add it to the repository.</p>

<p>At this point, my workspace looked like this:</p>

<pre>
.project                        # Eclipse project file
.classpath                      # Eclipse classpath file
.svn/                           # Subversion metadata
bin/
    .svn/
    LoanRecord.hbm.xml          # Hibernate metadata
lib/
    .svn/
    hibernate2.jar
    hsqldb.jar
src/
    .svn/
    LoanRecord.java             # my one and only source file
</pre>

<p>4.  I started up <a href="http://www.eclipse.org">Eclipse</a> again, and rebuilt the project, then dropped back to the shell to check the project's status with <a href="http://subversion.tigris.org">Subversion</a>:</p>

<pre>
$ svn status
?      bin/LoanRecord.class
    S  bin
!      bin/LoanRecord.java
</pre>

<p>Uh, what?  I understand that SVN doesn't know about the class files in the <code>bin</code> directory, but what's with the "S"?  And why does it think that there ought to be a file called <code>bin/LoanRecord.java</code>?</p>

<p>An hour and a half later, after chatting with Ben Collins-Sussman and others on the <a href="http://subversion.tigris.org">Subversion</a> IRC channel, we [<a href="#1">1</a>] have an answer.  When <a href="http://www.eclipse.org">Eclipse</a> builds your code, it copies the <code>.svn</code> sub-directory from the <code>src</code> directory into the output <code>bin</code> directory.  Yup, you heard that right: <em><a href="http://www.eclipse.org">Eclipse</a> overwrites the <code>.svn</code> sub-directory in <code>bin</code> when it compiles</em> [<a href="#2">2</a>].</p>

<p>Now, if I could track down <a href="http:/www.eclipse.org">Eclipse</a>'s developers, they would probably either say, "It's not our fault---<a href="http://subversion.tigris.org">Subversion</a> didn't even exist when we started work," or, "Yeah, yeah, we know, our bad, sorry," but I wouldn't accept either.  I <em>might</em> forgive them if <a href="http://www.eclipse.org">Eclipse</a> popped up a dialog saying, "Hey, you have some files here that I don't know anything about, do you mind if I crush them?", but it doesn't even do that.  Trampling on files and directories that aren't yours is just plain rude; anyone who has been programming for more than a few months ought to know better.</p>

<p>The fix is simple: don't add the <code>bin</code> directory to the repository [<a href="#3">3</a>]. But let's do some math.  Assume there are 10,000 <a href="http://subversion.tigris.org">Subversion</a> users out there.  Assume that a quarter of them are using <a href="http://www.eclipse.org">Eclipse</a>, and that one in ten of those make the same mistake I did (adding the compile output directory to the repository).  If each one of them wastes two hours figuring this out (half the time it took us), that's 500 hours, or twelve and a half working weeks.  You can write a <em>lot</em> of software in twelve and a half weeks...</p>

<p>Which is what we have to do, now that <a href="http://www.eclipse.org">Eclipse</a> isn't getting in the way.  Onward!</p>

<p>[<a name="1">1</a>] David James, Michelle Levesque, and Greg Wilson.</p>

<p>[<a name="2">2</a>] <a href="http://www.eclipse.org">Eclipse</a> <em>doesn't</em> do this to <code>CVS</code> sub-directories, presumably because its developers use CVS themselves, and fixed the problem the first time it came up.  Favoritism, that's what that is...</p>

<p>[<a name="3">3</a>] We tried using <a href="http://www.eclipse.org">Eclipse</a>'s inclusin/exclusion filters to prevent it from overwriting the <code>bin/.svn</code> sub-directory, but couldn't get that to work.</p>

                


              </div>
            </div>
            <div class="pagination">
              
              <a class="btn btn-default" href="/2004/09/14/accidental-horizons.html" class="next">Newer</a>
              
              
              <a class="btn btn-default" href="/2004/09/13/my-development-environment.html" class="previous">Older</a>
              
            </div>
            
            
            <div class="well">
              
              <div id="disqus_thread">
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
              </div>
              
            </div>
            
            
          </div>
        </div>
      </div>
    </div>
    
  <script type="text/javascript">
    var disqus_shortname = 'thirdbit';

    var disqus_config = function () {
        this.page.identifier = '2004-09-13-guards-guards-html';
    };

   (function() {
     var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
     dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
     (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>


    <div class="container-fluid">
  <div class="row-fluid">
    <div class="span12 footer navbar-inverse navbar-fixed-bottom">
      <br/>
      <p class="copyright">
        &copy; 2018 Greg Wilson.
        All content made available under the <a href="/license/">Creative Commons - Attribution License</a>.
      </p>
    </div>
  </div>
</div>


  <script type="text/javascript">
    var disqus_shortname = 'thirdbit';

    var disqus_config = function () {
        this.page.identifier = '2004-09-13-guards-guards-html';
    };

   (function () {
     var s = document.createElement('script'); s.async = true;
     s.type = 'text/javascript';
     s.src = '//' + disqus_shortname + '.disqus.com/count.js';
     (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
   }());
 </script>



  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-1301159-1', 'auto');
    ga('send', 'pageview');
  </script>



</body>
</html>

  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="/js/jquery.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/theme.js"></script>
<link href="/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/css/theme.css" rel="stylesheet" type="text/css">
<link href="/css/syntax.css" rel="stylesheet" type="text/css">



    <title>Third Bit: Please Tell Me Python Logging *Isn't* Supposed to Work This Way</title>
  </head>
  <body>
    <div class="container-fluid">
  <div class="row-fluid">
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">Third Bit</a>
      </div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
          <li class="active visible-xs-block"><a href="/links/">Links</a></li>
          <li class="active"><a href="/about/">About</a></li>
          <li class="active"><a href="/talks/">Talks</a></li>
          <li class="active"><a href="/ideas/">Ideas</a></li>
          <li class="active"><a href="/reading/">Reading</a></li>
          <li class="active"><a href="/archive/">Archive</a></li>
          <li class="active"><a href="/teaching/"><em>How to Teach</em></a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li class="active"><a href="http://appear.in/gvwilson"><img src="/files/appear.in.svg" class="navbar-icon" /></a></li>
          <li class="active"><a href="https://github.com/gvwilson"><img src="/files/github.svg" class="navbar-icon" /></a></li>
          <li class="active"><a href="http://twitter.com/gvwilson"><img src="/files/twitter.svg" class="navbar-icon" /></a></li>
          <li class="active"><a href="/feed.xml"><img src="/files/rss.svg" class="navbar-icon" /></a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

    <div class="container container-left">
      <div class="row">
        <div class="col-md-3 hidden-xs">
          <div class="sidebar well">
  <h2>Links</h2>
<p><em><a href="http://software-carpentry.org">Software Carpentry</a></em></p>
<p><em><a href="http://aosabook.org">Architecture of Open Source Applications</a></em></p>
<p><em><a href="http://neverworkintheory.org">Never Work in Theory</a></em></p>
<p><em><a href="http://sensibleadventures.com">Sensible Adventures</a></em></p>
<p><a href="/cv/">CV</a></p>
<p><a href="/bib/">Bibliography</a></p>

  <h2>Favorites</h2>
  
  
  <p><a href="/2018/03/20/goodbye-jeff.html">Goodbye, Jeff</a></p>
  
  <p><a href="/2018/03/16/seven-ways.html">Seven Ways to Think Like a Programmer</a></p>
  
  <p><a href="/2018/03/13/base-case-for-empirical-software-engineering.html">A Base Case for Empirical Software Engineering Research</a></p>
  
  <p><a href="/2018/01/07/book-club.html">Book Club</a></p>
  
  <p><a href="/2017/12/21/talking-people-into-things.html">Ten Simple Rules for Talking People Into Things</a></p>
  
  <p><a href="/2017/11/05/for-everyone.html">Carpentry For Everyone</a></p>
  
  <p><a href="/2017/10/16/exercise-types.html">What Kinds of Exercises Do You Use to Teach Programming?</a></p>
  
  <p><a href="/2017/09/30/git-graphs-and-engineering.html">Git, Graphs, and Software Engineering</a></p>
  
  <p><a href="/2017/06/19/ten-rules-research-partner.html">Ten Simple Rules for Being a Good Research Partner</a></p>
  
  <p><a href="/2017/05/22/numerical-javascript.html">Numerical JavaScript</a></p>
  
  <p><a href="/2017/01/06/them-thats-got.html">Them That's Got</a></p>
  
  <p><a href="/2016/10/30/rules-for-teaching.html">Rules for Teaching</a></p>
  
  <p><a href="/2016/04/29/why-teachers-dont-collaborate.html">Why Teachers Don't Collaborate on Lesson Development</a></p>
  
  <p><a href="/2016/04/01/zen-and-the-art-of-assignment-operators.html">Zen and the Art of Assignment Operators</a></p>
  
  <p><a href="/2016/03/13/in-my-better-world.html">In My Better World</a></p>
  
  <p><a href="/2015/12/19/why-i-teach.html">Why I Teach (Revisited)</a></p>
  
  <p><a href="/2015/12/06/just-keep-swimming.html">Just Keep Swimming</a></p>
  
  <p><a href="/2015/11/29/exaptation.html">Exaptation and the Future of Software Engineering</a></p>
  
  <p><a href="/2015/11/09/daddy-why-dont-you-ever-laugh.html">Daddy, Why Don't You Ever Laugh?</a></p>
  
  <p><a href="/2015/09/22/dad.html">Goodbye, Dad</a></p>
  
  <p><a href="/2014/10/08/announcing-the-creation-of-the-software-carpentry-foundational.html">Announcing the Creation of the Software Carpentry Foundation</a></p>
  
  <p><a href="/2014/03/14/learning-at-scale.html">Is Learning at Scale Just Another Name for Ubiquitous Surveillance in the Classroom?</a></p>
  
  <p><a href="/2013/10/17/you-keep-using-that-word.html">You Keep Using That Word</a></p>
  
  <p><a href="/2013/02/11/correctness-isnt-compelling.html">Correctness Isn't Compelling</a></p>
  
  <p><a href="/2012/10/23/twenty-percent.html">Twenty Percent</a></p>
  
  <p><a href="/2012/06/29/those-who-ignore-history.html">That Seems Simple to Me</a></p>
  
  <p><a href="/2012/01/21/the-life-i-did-live-the-breath-i-breathed.html">We Have Nothing To Give Them</a></p>
  
</div>

        </div>
        <div class="col-md-9">
          <div class="article">
            <div class="well">
              <h1><a href="/2006/02/02/please-tell-me-python-logging-isnt-supposed-to-work-this-way.html">Feb 2, 2006 - Please Tell Me Python Logging *Isn't* Supposed to Work This Way</a></h1>
              <div class="post-content">
                <p>I'm looking at <a href="http://www.python.org/doc/2.4.1/lib/minimal-example.html">http://www.python.org/doc/2.4.1/lib/minimal-example.html</a>;
I try a cut-down version of the example:</p>

<pre>
$ python
&gt;&gt;&gt; import logging
&gt;&gt;&gt; logging.debug('debug')
&gt;&gt;&gt; logging.info('info')
&gt;&gt;&gt; logging.warning('warning')
WARNING:root:warning
</pre>

<p>Cool.  Now I do this:</p>

<pre>
&gt;&gt;&gt; logging.basicConfig(level=logging.DEBUG)
</pre>

<p>I believe I've turned on output for debug-level logging, but no,
it's still working as before:</p>

<pre>
&gt;&gt;&gt; logging.debug('debug')
&gt;&gt;&gt; logging.info('info')
&gt;&gt;&gt; logging.warning('warning')
WARNING:root:warning
</pre>

<p>Hm... OK, try it in a fresh Python session:</p>

<pre>
$ python
&gt;&gt;&gt; logging.basicConfig(level=logging.DEBUG)
&gt;&gt;&gt; logging.debug('debug')
DEBUG:root:debug
</pre>

<p>So is really only possible to configure logging once???  Bah...
Let's try this:</p>

<pre>
$ python
&gt;&gt;&gt; logging.getLogger().setLevel(logging.DEBUG)
&gt;&gt;&gt; logging.debug('debug')
DEBUG:root:debug
</pre>

<p>All right, so I can grab the internal logger object out of the
logging framework, and change its settings, but
<code>basicConfig</code> doesn't change settings that are already in
place...???</p>

<p>Hm: <a href="http://www.python.org/doc/2.4.1/lib/multiple-destinations.html">http://www.python.org/doc/2.4.1/lib/multiple-destinations.html</a>
suggests that what I ought to do is create a new handler object,
configure it, and stick it back into the logging framework.  This
seems clumsy---which might explain why nobody I know ever uses the
logging library.  I hope someone can tell me that there's an easier
way...</p>

<hr />

<p>Later: CrankyCoder says, "log4j was a bad idea in Java, it seems
like a worse idea in Python."  You have to grab the root logger to set
the log level for all child loggers.  Unless of course you have those
child loggers with overridden log levels.</p>

<pre>
$ python
&gt;&gt;&gt; from logging import *
&gt;&gt;&gt; debug('fda')
&gt;&gt;&gt; root

&gt;&gt;&gt; root.level = DEBUG
&gt;&gt;&gt; debug('fda')
DEBUG:root:fda
</pre>

<p>The documentation isn't all that clear but
<code>basicConfig</code>debug()</code>,
<code>warn()</code>, <code>info()</code> or other logging commands,
you're registering a handler.  From <code>basicConfig</code>:</p>

<pre>
1203     if len(root.handlers) == 0:
1204         filename = kwargs.get("filename")
1205         if filename:
1206             mode = kwargs.get("filemode", 'a')
1207             hdlr = FileHandler(filename, mode)
1208         else:
1209             stream = kwargs.get("stream")
1210             hdlr = StreamHandler(stream)
1211         fs = kwargs.get("format", BASIC_FORMAT)
1212         dfs = kwargs.get("datefmt", None)
1213         fmt = Formatter(fs, dfs)
1214         hdlr.setFormatter(fmt)
1215         root.addHandler(hdlr)
</pre>

<p>Basically - you're expected to get loggers by calling
<code>getLogger('your.named.logger')</code>.  You build a hierarchy of
loggers up and the log levels cascade down the dotted namespace:</p>

<pre>
$ python
&gt;&gt;&gt; from logging import *
&gt;&gt;&gt; root

&gt;&gt;&gt; logA = getLogger('a')
&gt;&gt;&gt; logAB = getLogger('a.b')
&gt;&gt;&gt; logA.level = INFO
&gt;&gt;&gt; debug('from root logger')
&gt;&gt;&gt; warn('from root logger')
WARNING:root:from root logger
&gt;&gt;&gt; logA.debug('from a')
&gt;&gt;&gt; logA.info('from a')
INFO:a:from a
&gt;&gt;&gt; logA.warn('from a')
WARNING:a:from a
&gt;&gt;&gt; logAB.debug('from a.b')
&gt;&gt;&gt; logAB.info('from a.b')
INFO:a.b:from a.b
&gt;&gt;&gt; logAB.warn('from a.b')
WARNING:a.b:from a.b
</pre>

<p>Bah---I think that structured logging is essential to good software
development, but I'd be embarrassed putting this in front of students
and saying, "It's supposed to work this way."</p>

                


              </div>
            </div>
            <div class="pagination">
              
              <a class="btn btn-default" href="/2006/02/04/one-world.html" class="next">Newer</a>
              
              
              <a class="btn btn-default" href="/2006/02/02/debugging-lecture.html" class="previous">Older</a>
              
            </div>
            
            
            <div class="well">
              
              <div id="disqus_thread">
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
              </div>
              
            </div>
            
            
          </div>
        </div>
      </div>
    </div>
    
  <script type="text/javascript">
    var disqus_shortname = 'thirdbit';

    var disqus_config = function () {
        this.page.identifier = '2006-02-02-please-tell-me-python-logging-isnt-supposed-to-work-this-way-html';
    };

   (function() {
     var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
     dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
     (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>


    <div class="container-fluid">
  <div class="row-fluid">
    <div class="span12 footer navbar-inverse navbar-fixed-bottom">
      <br/>
      <p class="copyright">
        &copy; 2018 Greg Wilson.
        All content made available under the <a href="/license/">Creative Commons - Attribution License</a>.
      </p>
    </div>
  </div>
</div>


  <script type="text/javascript">
    var disqus_shortname = 'thirdbit';

    var disqus_config = function () {
        this.page.identifier = '2006-02-02-please-tell-me-python-logging-isnt-supposed-to-work-this-way-html';
    };

   (function () {
     var s = document.createElement('script'); s.async = true;
     s.type = 'text/javascript';
     s.src = '//' + disqus_shortname + '.disqus.com/count.js';
     (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
   }());
 </script>



  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-1301159-1', 'auto');
    ga('send', 'pageview');
  </script>



</body>
</html>

  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="/js/jquery.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/theme.js"></script>
<link href="/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/css/theme.css" rel="stylesheet" type="text/css">
<link href="/css/syntax.css" rel="stylesheet" type="text/css">



    <title>Third Bit: Pandoc and Building Pages</title>
  </head>
  <body>
    <div class="container-fluid">
  <div class="row-fluid">
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">Third Bit</a>
      </div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
          <li class="active visible-xs-block"><a href="/links/">Links</a></li>
          <li class="active"><a href="/about/">About</a></li>
          <li class="active"><a href="/talks/">Talks</a></li>
          <li class="active"><a href="/ideas/">Ideas</a></li>
          <li class="active"><a href="/reading/">Reading</a></li>
          <li class="active"><a href="/archive/">Archive</a></li>
          <li class="active"><a href="/teaching/"><em>How to Teach</em></a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li class="active"><a href="http://appear.in/gvwilson"><img src="/files/appear.in.svg" class="navbar-icon" /></a></li>
          <li class="active"><a href="https://github.com/gvwilson"><img src="/files/github.svg" class="navbar-icon" /></a></li>
          <li class="active"><a href="http://twitter.com/gvwilson"><img src="/files/twitter.svg" class="navbar-icon" /></a></li>
          <li class="active"><a href="/feed.xml"><img src="/files/rss.svg" class="navbar-icon" /></a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

    <div class="container container-left">
      <div class="row">
        <div class="col-md-3 hidden-xs">
          <div class="sidebar well">
  <h2>Links</h2>
<p><em><a href="http://software-carpentry.org">Software Carpentry</a></em></p>
<p><em><a href="http://aosabook.org">Architecture of Open Source Applications</a></em></p>
<p><em><a href="http://neverworkintheory.org">Never Work in Theory</a></em></p>
<p><em><a href="http://sensibleadventures.com">Sensible Adventures</a></em></p>
<p><a href="/cv/">CV</a></p>
<p><a href="/bib/">Bibliography</a></p>

  <h2>Favorites</h2>
  
  
  <p><a href="/2018/03/20/goodbye-jeff.html">Goodbye, Jeff</a></p>
  
  <p><a href="/2018/03/16/seven-ways.html">Seven Ways to Think Like a Programmer</a></p>
  
  <p><a href="/2018/03/13/base-case-for-empirical-software-engineering.html">A Base Case for Empirical Software Engineering Research</a></p>
  
  <p><a href="/2018/01/07/book-club.html">Book Club</a></p>
  
  <p><a href="/2017/12/21/talking-people-into-things.html">Ten Simple Rules for Talking People Into Things</a></p>
  
  <p><a href="/2017/11/05/for-everyone.html">Carpentry For Everyone</a></p>
  
  <p><a href="/2017/10/16/exercise-types.html">What Kinds of Exercises Do You Use to Teach Programming?</a></p>
  
  <p><a href="/2017/09/30/git-graphs-and-engineering.html">Git, Graphs, and Software Engineering</a></p>
  
  <p><a href="/2017/06/19/ten-rules-research-partner.html">Ten Simple Rules for Being a Good Research Partner</a></p>
  
  <p><a href="/2017/05/22/numerical-javascript.html">Numerical JavaScript</a></p>
  
  <p><a href="/2017/01/06/them-thats-got.html">Them That's Got</a></p>
  
  <p><a href="/2016/10/30/rules-for-teaching.html">Rules for Teaching</a></p>
  
  <p><a href="/2016/04/29/why-teachers-dont-collaborate.html">Why Teachers Don't Collaborate on Lesson Development</a></p>
  
  <p><a href="/2016/04/01/zen-and-the-art-of-assignment-operators.html">Zen and the Art of Assignment Operators</a></p>
  
  <p><a href="/2016/03/13/in-my-better-world.html">In My Better World</a></p>
  
  <p><a href="/2015/12/19/why-i-teach.html">Why I Teach (Revisited)</a></p>
  
  <p><a href="/2015/12/06/just-keep-swimming.html">Just Keep Swimming</a></p>
  
  <p><a href="/2015/11/29/exaptation.html">Exaptation and the Future of Software Engineering</a></p>
  
  <p><a href="/2015/11/09/daddy-why-dont-you-ever-laugh.html">Daddy, Why Don't You Ever Laugh?</a></p>
  
  <p><a href="/2015/09/22/dad.html">Goodbye, Dad</a></p>
  
  <p><a href="/2014/10/08/announcing-the-creation-of-the-software-carpentry-foundational.html">Announcing the Creation of the Software Carpentry Foundation</a></p>
  
  <p><a href="/2014/03/14/learning-at-scale.html">Is Learning at Scale Just Another Name for Ubiquitous Surveillance in the Classroom?</a></p>
  
  <p><a href="/2013/10/17/you-keep-using-that-word.html">You Keep Using That Word</a></p>
  
  <p><a href="/2013/02/11/correctness-isnt-compelling.html">Correctness Isn't Compelling</a></p>
  
  <p><a href="/2012/10/23/twenty-percent.html">Twenty Percent</a></p>
  
  <p><a href="/2012/06/29/those-who-ignore-history.html">That Seems Simple to Me</a></p>
  
  <p><a href="/2012/01/21/the-life-i-did-live-the-breath-i-breathed.html">We Have Nothing To Give Them</a></p>
  
</div>

        </div>
        <div class="col-md-9">
          <div class="article">
            <div class="well">
              <h1><a href="/2014/10/29/pandoc-and-gh-pages.html">Oct 29, 2014 - Pandoc and Building Pages</a></h1>
              <div class="post-content">
                <p>
  Long-time readers of this blog and
  <a href="/pipermail/discuss/">our discussion list</a>
  will know that I'm unhappy with the choices we have for formatting our lessons.
  Thanks to <a href="https://twitter.com/kwbroman/status/526776697828671488">a tweet</a>
  from <a href="http://kbroman.org/">Karl Broman</a>,
  I may have an answer.
  It's outlined below,
  and I'd be grateful for comments on usability and feasibility.
</p>
<p>
  Here's a summary of the forces we need to balance:
</p>
<ol>
  <li>
    <em>People should be able to write lessons in Markdown.</em>
    We choose Markdown rather than LaTeX or HTML because it's easier to read, diff, and merge;
    we choose it rather than AsciiDoc or reStructuredText (reST) because it's much better known.
  </li>
  <li>
    <em>People should be able to preview their lessons locally before publishing them,</em>
    both to avoid embarrassment and because many people compose offline.
  </li>
  <li>
    <em>Lessons should be easy to write and read.</em>
    We shouldn't require people to put div's and other bits of HTML in their Markdown.
  </li>
  <li>
    <em>It should be easy to add machine-comprehensible structure to lessons.</em>
    We want to be able to build tools to extract lesson titles,
    count challenge exercises,
    etc.,
    all of which requires machine-comprehensible source.
    This is in tension with the point above:
    everything we do to make lessons more readable to computers
    means extra work or less readbility for people.
  </li>
  <li>
    <em>We should use only off-the-shelf tools.</em>
    We don't want to have to build, document, and maintain custom plugins for formatting tools.
    We <em>do</em> want to use GitHub's <code>gh-pages</code> magic.
  </li>
  <li>
    <em>The workflow for creating and publishing lessons should be authentic,</em>
    i.e.,
    the way people write and publish lessons should be
    a way they might use to write and publish research papers.
  </li>
</ol>
<p>
  And here's the proposal:
</p>
<ol>
  <li>
    We stop relying on Jekyll and start using Pandoc instead.
  </li>
  <li>
    Every lesson is stored in a GitHub repository that has a <code>gh-pages</code> branch.
    (GitHub will automatically publish the files in that branch as a mini-website.)
  </li>
  <li>
    The root directory of that repository contains:
    <ul>
      <li>a <code>README.md</code> file with a one-liner about the lesson's content and authorship;</li>
      <li>a sub-directory called <code>src</code> that contains the source files for the lesson;</li>
      <li>the compiled versions of those files; and</li>
      <li>an empty file called <code>.nojekyll</code> to tell GitHub that we don't want it to run Jekyll.</li>
    </ul>
  </li>
  <li>
    The <code>src</code> directory contains all the source files for the lesson,
    and a simple <code>Makefile</code> that uses Pandoc instead of Jekyll to compile those files.
    Pandoc's output goes in the root directory,
    i.e.,
    one level above the <code>src</code> directory,
    and the Makefile makes sure that other files (CSS, images, etc.) are copied up as well.
  </li>
  <li>
    When an author makes a change,
    she must build locally,
    then commit those files to the GitHub repository.
    Yes,
    this means that generated files are stored in version control,
    which is normally regarded as a bad idea.
    But it does mean we can use Pandoc,
    which supports a nicer dialect of Markdown than Jekyll on GitHub,
    and we don't have to worry about compiling files on one branch
    and committing them to another.
  </li>
</ol>
<p>
  I've created a <a href="https://github.com/gvwilson/subdir">proof-of-concept repository</a>
  to show what this might look like in practice.
  It seems to work pretty well,
  and I think it satisfies the "authentic workflow" requirement
  (though I'd be grateful if others could tell me it doesn't).
  The only usability hiccup I can see is that
  authors will have to remember to commit the generated files:
  my usual workflow of <code>git&nbsp;add&nbsp;-A</code>
  followed by <code>git&nbsp;commit&nbsp;-m</code>
  only adds files in or below the current working directory,
  so I would have to <code>cd&nbsp;..</code> up from <code>src</code>
  to the root directory of their local copy of the repo first.
</p>
<p>
  One variation on this raised by Trevor King is
  to keep the source files in the root directory of the <code>master</code> branch,
  and have the lesson maintainer merge changes into the <code>src</code> directory of the <code>gh-pages</code> branch
  and do the build.
  This frees authors from having to install the build tools&mdash;only
  the maintainers need that&mdash;but on balance,
  I think most people will want to preview before uploading,
  so the savings will be mostly theoretical.
</p>
<p>
  If you have other thoughts,
  or can suggest other improvements,
  please add comments to this post.
  We'd particularly like to hear from people who aren't Git experts
  or aren't familiar with HTML templating systems, Makefiles, and the like.
  Does the workflow described above make sense?
  If not,
  what do you think would go wrong where, and why?
</p>

                <p align="center"><em>This post originally appeared in the <a href="http://software-carpentry.org">Software Carpentry</a> blog.</em></p>


              </div>
            </div>
            <div class="pagination">
              
              <a class="btn btn-default" href="/2014/10/30/why-we-dont-teach-testing.html" class="next">Newer</a>
              
              
              <a class="btn btn-default" href="/2014/10/28/why-software-matters.html" class="previous">Older</a>
              
            </div>
            
            
            <div class="well">
              
              <div id="disqus_thread">
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
              </div>
              
            </div>
            
            
          </div>
        </div>
      </div>
    </div>
    
  <script type="text/javascript">
    var disqus_shortname = 'thirdbit';

    var disqus_config = function () {
        this.page.identifier = '2014-10-29-pandoc-and-gh-pages-html';
    };

   (function() {
     var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
     dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
     (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>


    <div class="container-fluid">
  <div class="row-fluid">
    <div class="span12 footer navbar-inverse navbar-fixed-bottom">
      <br/>
      <p class="copyright">
        &copy; 2018 Greg Wilson.
        All content made available under the <a href="/license/">Creative Commons - Attribution License</a>.
      </p>
    </div>
  </div>
</div>


  <script type="text/javascript">
    var disqus_shortname = 'thirdbit';

    var disqus_config = function () {
        this.page.identifier = '2014-10-29-pandoc-and-gh-pages-html';
    };

   (function () {
     var s = document.createElement('script'); s.async = true;
     s.type = 'text/javascript';
     s.src = '//' + disqus_shortname + '.disqus.com/count.js';
     (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
   }());
 </script>



  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-1301159-1', 'auto');
    ga('send', 'pageview');
  </script>



</body>
</html>

  </body>
</html>
